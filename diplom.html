<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Диплом</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body {
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family: 'Arial', sans-serif;
    background: #f0f0f0;
    flex-direction: column;
    gap: 20px;
  }

  #certificate {
    width: 600px;
    height: 900px;
    padding: 40px;
    border: 8px solid #4A90E2;
    border-radius: 15px;

    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    position: relative;
    display:flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    box-sizing: border-box;
  }

  #certificate h1 {
    font-size: 42px;
    margin-bottom: 10px;
    color: #333;
  }

  #certificate h2 {
    font-size: 32px;
    margin: 20px 0;
    color: #4A90E2;
  }

  #certificate p {
    font-size: 20px;
    margin: 10px 0;
    color: #333;
  }

  #place {
    
    font-size: 70px;
    font-weight: bold;
    color: #FF6F61;
    border: 4px solid #FF6F61;
    padding: 8px 20px;
    border-radius: 10px;
  }
  

  #logo {
    width: 70px;
    height: 70px;
    background: #4A90E2;
    border-radius: 50%;
    margin-bottom: 20px;
  }

  #btnGenerate {
    padding: 10px 20px;
    font-size: 16px;
  }
</style>
</head>
<body>
    <div id="certificate">
  <h3 id="adress"></h3>
  <h1>Диплом</h1>
  <p>награждается</p>
  <h2 id="studentName">!!!!!!!!!!!!!</h2>
  
  <p>за успешное окончание</p>
  <p>викторины "Мифы древней греции"</p>
  <br>
  
  <h2 id="counter">Результат: !!!!!!!!!!!!!</h2>
  <br>
  <p>Дата: <span id="date"></span></p>
  <br>
  <p>Учитель русского языка и литературы</p>
  <p>________________________________</p>
  
  
</div>

<button id="btnGenerate">Скачать PDF</button>
    
    <script>
        // Получаем данные из URL параметров
        const urlParams = new URLSearchParams(window.location.search);
        const name = urlParams.get('name');
        const GUO = urlParams.get('GUO');
        
        

    

  const date = new Date().toLocaleDateString();

  const count = sessionStorage.getItem('counter') || 0;
  



    document.getElementById("adress").textContent = GUO;

  document.getElementById("studentName").textContent = name;

  document.getElementById("date").textContent = date;

  document.getElementById("counter").textContent = "Результат: " + count + " из 120 баллов";

  // ===== Генерация PDF =====
  const { jsPDF } = window.jspdf;

  document.getElementById("btnGenerate").addEventListener("click", () => {
    const certificate = document.getElementById("certificate");

    html2canvas(certificate, { scale: 2 }).then(canvas => {
      const imgData = canvas.toDataURL("image/png");

      // Портретная ориентация
      const pdf = new jsPDF({
        orientation: "portrait",
        unit: "px",
        format: [canvas.width, canvas.height]
      });

      pdf.addImage(imgData, "PNG", 0, 0, canvas.width, canvas.height);
      pdf.save("certificate_"+name+".pdf");
    });
  });
    </script>
    

</body>
</html>